import{r as v,b as k,o,d as _,w,e as C,f as i,u as n,g as $,t as h,h as b,i as x,j as u,k as B,c as g,F as P,l as D,m as y}from"./index-f19e1d78.js";const L={alt:"",class:"main__catalog_list-item-img"},S={class:"main__catalog_list-item-title"},j={__name:"CatalogItem",props:{item:Object,type:String},setup(t){return(e,a)=>{const c=v("router-link"),s=k("lazy");return o(),_(c,{to:`${t.type}/${t.item.id}`,class:"main__catalog_list-item"},{default:w(()=>[C(i("img",L,null,512),[[s,n($)+t.item.backdrop_path]]),i("h2",S,h(t.item.name||t.item.title),1)]),_:1},8,["to"])}}},z={key:0,class:"main__catalog container"},F={class:"main__catalog_title"},H={class:"main__catalog_list"},N={__name:"Catalog",props:["type"],setup(t){const e=t,a=b();a.getPopular({type:e.type});const c=x(()=>e.type=="movie"?"Все фильмы":"Все сериалы");let s=u(1),r=u([]),l=u(!1);const m=async()=>{if(!l.value){l.value=!0,await a.getPopular({type:e.type,page:s.value});const p=e.type=="movie"?a.popularMovies:a.popularTvs;r.value.push(...p),l.value=!1,s.value++}};return B(()=>{window.onscroll=()=>{scrollY+window.innerHeight>=document.body.scrollHeight&&m()},m()}),(p,I)=>{const f=v("Loader");return n(r)?(o(),g("div",z,[i("h2",F,h(c.value),1),i("div",H,[(o(!0),g(P,null,D(n(r),d=>(o(),_(j,{key:d.id,item:d,type:t.type},null,8,["item","type"]))),128))]),n(l)?(o(),_(f,{key:0})):y("",!0)])):y("",!0)}}};export{N as _};
