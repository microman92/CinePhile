import{n as x,A as D,p as I,_ as A,o as r,c as _,f as s,i as l,j as L,r as y,b as R,e as f,u as p,g as w,t as c,a as v,d as b,m as k,F as S,l as T,w as z,q as F,B as Y,C as j,D as K}from"./index-f19e1d78.js";const N=x({id:"trailer",state:()=>({url:`https://www.googleapis.com/youtube/v3/search?key=${D}`,result:null,keyKino:"08995644d8a21fac365555629a7f1897"}),actions:{async getVideo(t){try{let i=await I.get(`${this.url}&q=${encodeURIComponent(t)}&part=snippet&type=video&maxResults=1`);this.result=i.data.items[0].id.videoId}catch(e){console.error("Произошла ошибка при поиске данных",e)}}},getters:{}});const U={class:"trailerModal__block"},q=["src"],O={__name:"TrailerModal",props:{getVideoId:String,openModal:Boolean},emits:["closeModal"],setup(t,{emit:e}){const i=n=>`https://www.youtube.com/embed/${n}?rel=0&showinfo=0&iv_load_policy=3&modestbranding=1`,a=()=>{e("closeModal")};return(n,o)=>(r(),_("div",{class:"trailerModal",onClick:a},[s("div",U,[s("iframe",{width:"100%",height:"100%",src:i(t.getVideoId),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""},null,8,q)])]))}},E=A(O,[["__scopeId","data-v-c07c580d"]]),G={key:0,class:"main__intro"},H={alt:"",class:"main__intro_bg"},J={class:"main__intro_inner"},P={class:"main__intro_inner-left"},Q={class:"main__intro_inner-desc"},W={class:"main__intro_inner-right"},X={alt:""},Z={class:"main__intro_actors"},ee=s("h2",{class:"main__intro_actors-title"},"В главных ролях",-1),te={__name:"Intro",props:{type:String,item:Object},setup(t){const e=t,i=l(()=>new Date(e.item.release_date).getFullYear()||new Date(e.item.first_air_date).getFullYear()),a=l(()=>e.item.genres.reduce((h,g)=>h+`, ${g.name}`,"")),n=l(()=>Math.floor(e.item.runtime/60)||Math.floor(e.item.number_of_episodes/60)),o=l(()=>e.item.runtime%60||e.item.number_of_episodes%60),m=N(),d=l(()=>m.result);let u=L(!1);const $=h=>{m.getVideo(h+" трейлер"),u.value=!0,m.getKinopoisk()},V=()=>{u.value=!1};return(h,g)=>{const B=y("Trailer"),C=y("Actors"),M=R("lazy");return t.item?(r(),_("div",G,[f(s("img",H,null,512),[[M,p(w)+t.item.poster_path]]),s("div",J,[s("div",P,[s("h1",null,c(t.item.title||t.item.name),1),s("p",null,c(t.item.overview||"Нет описания"),1),s("p",Q,[s("span",null,c(i.value)+" "+c(a.value),1),s("span",null,c(n.value)+"h "+c(o.value)+"m",1)]),v(B,{onClick:g[0]||(g[0]=ve=>$(t.item.title))}),p(u)?(r(),b(E,{key:0,getVideoId:d.value,openModal:p(u),onCloseModal:V},null,8,["getVideoId","openModal"])):k("",!0)]),s("div",W,[f(s("img",X,null,512),[[M,p(w)+t.item.poster_path]])]),s("div",Z,[ee,v(C,{type:t.type,id:t.item.id,count:"6"},null,8,["type","id"])])])])):k("",!0)}}},se={class:"main__rec container"},ie=s("h2",{class:"main__rec_title"},"Рекомендации",-1),oe={class:"main__rec_list"},ae={alt:"",class:"main__rec_list-item-img"},ne={class:"main__rec_list-item-title"},re={class:"main__rec_list-item-title"},ce={__name:"Rec",props:{rec:Array,type:String},setup(t){return(e,i)=>{const a=y("router-link"),n=R("lazy");return r(),_("div",se,[ie,s("div",oe,[(r(!0),_(S,null,T(t.rec,o=>(r(),b(a,{to:`${o.id}`,class:"main__rec_list-item",key:o.id},{default:z(()=>[f(s("img",ae,null,512),[[n,p(w)+o.backdrop_path]]),s("h2",ne,c(o.name||o.title),1),s("h2",re,c(o.name||o.title),1)]),_:2},1032,["to"]))),128))])])}}},le={class:"main__sums"},_e={class:"main__sums_item-name"},me={class:"main__sums_item-text"},de={__name:"info",props:{item:Object},setup(t){const e=t,i=l(()=>[{name:"Бюджет",text:e.item.budget?`$ ${e.item.budget.toLocaleString()}`:"Нет данных"},{name:"Сборы",text:e.item.revenue?`$ ${e.item.revenue.toLocaleString()}`:"Нет данных"},{name:"Статус",text:e.item.status?`$ ${e.item.status}`:"Нет данных"},{name:"Исходное название",text:e.item.original_title||e.item.original_name}]);return(a,n)=>(r(),_("div",le,[(r(!0),_(S,null,T(i.value,o=>(r(),_("div",{class:"main__sums_item",key:o.name},[s("span",_e,c(o.name),1),s("span",me,c(o.text),1)]))),128))]))}},ue=x({id:"Rec",state:()=>({url:"https://api.themoviedb.org/3/",recMovie:null,recTv:null}),actions:{async getRec({type:t,id:e}){try{const i=await I.get(`${this.url}${t}/${e}/recommendations?api_key=${F}&language=ru-RU`);t=="movie"?this.recMovie=i.data.results:this.recTv=i.data.results}catch(i){console.error("Произошла ошибка в получении рекомендованного фильма или сериала",i)}}},getters:{}}),pe={key:0,class:"main__media"},ge={__name:"Media",props:{type:String},setup(t){const e=t,i=Y(),a=j();a.getItemById({type:e.type,id:i.params.id});const n=ue();n.getRec({type:e.type,id:i.params.id});const o=l(()=>{let d=e.type=="movie"?n.recMovie:n.Tv;if(d)return d.slice(0,4)}),m=l(()=>e.type=="movie"?a.movie:a.tv);return K(()=>{a.movie=a.tv=null}),(d,u)=>{const $=y("Loader");return m.value?(r(),_("div",pe,[v(te,{type:t.type,item:m.value},null,8,["type","item"]),v(de,{item:m.value},null,8,["item"]),v(ce,{type:t.type,rec:o.value},null,8,["type","rec"])])):(r(),b($,{key:1}))}}};export{ge as _};
